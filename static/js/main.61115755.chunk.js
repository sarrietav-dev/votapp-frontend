(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{197:function(e,t,n){},204:function(e,t,n){},337:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(0),r=n(15),i=n.n(r),s=(n(197),n(7)),o=n(165),l=(n(204),n(13)),u=n(176),d=n(394),j=n(395),b=n(390),h=n(379),f=n(393),O=n(418),p=n(21),m=n(17),x=Object(m.c)({name:"dialog",initialState:{isOpen:!1},reducers:{openDialog:function(e){e.isOpen=!0},closeDialog:function(e){e.isOpen=!1}}}),g=x.actions,v=g.openDialog,y=g.closeDialog,C=x.reducer,E=n(9),w=n.n(E),k=n(16),S=n(27),T=n.n(S),_="https://votapp-backend.herokuapp.com/api",I=Object(m.c)({name:"alerts",initialState:{open:!1,message:"",variant:"info"},reducers:{raiseAlert:function(e,t){e.open=!0,e.message=t.payload.message,e.variant=t.payload.variant},closeAlert:function(e,t){e.open=!1,e.message="",e.variant=""}}}),A=I.actions,W=A.raiseAlert,N=A.closeAlert,U=I.reducer,P=Object(m.c)({name:"auth",initialState:{authToken:"",isAdmin:"",_id:""},reducers:{setAuthToken:function(e,t){e.authToken=t.payload},logOut:function(e){e.authToken="",e.isAdmin=!1,e._id=""},setData:function(e,t){e.isAdmin=t.payload.is_admin,e._id=t.payload._id}}}),V=P.actions,q=V.logOut,D=V.setAuthToken,B=V.setData,L=P.reducer,R=n(382),F=n(411),M=n(386),H=function(){return{login:{password:"Password",logIn:"Log In",requestAccess:"Request access"},registerDialog:{dialogTitle:"Fill request",yourName:"Your Name",code:"Code",password:"Password",gender:"Gender",male:"Male",female:"Female",cancel:"Cancel",send:"Send",careers:{computerScience:"Computer Science",chemistryEngineering:"Chemistry Engineering",civilEngineering:"Civil Engineering",medicine:"Medicine"}},dashboard:{blob:"There are no elections yet"},createElectionDialog:{createElection:"Create election",title:"Title",position:"Position",selectCandidates:"Select Candidates Beforehand",cancel:"Cancel",create:"Create"},userSelector:{placeholder:"Select the candidates"},adminPanel:{verifyUsers:"Verify Users"},candidateCard:{cardTitle:"Candidate"},deleteElectionWarning:{dialogTitle:"Are you sure you want to delete this?",dialogContent:"This can't be undone",cancel:"Cancel",continue:"Continue"},electionDashboard:{blob:"You can vote now!",raiseAlertMessage:"You already voted!",electionEnded:"The election has ended",userVoted:"You already voted",voteNow:"Vote now!",endElection:"End Election"},electionSettings:{dialogTitle:"Election settings",title:"Title",position:"Position",cancel:"Cancel",accept:"Accept"}}},Y=function(){return{login:{password:"Contrase\xf1a",logIn:"Ingresar",requestAccess:"Solicitar acceso"},registerDialog:{dialogTitle:"Llena la solicitud",yourName:"Tu nombre",code:"C\xf3digo",password:"Contrase\xf1a",gender:"G\xe9nero",male:"Hombre",female:"Mujer",cancel:"Cancelar",send:"Enviar",careers:{computerScience:"Ingenier\xeda de Sistemas",chemistryEngineering:"Ingenier\xeda Qu\xedmica",civilEngineering:"Ingenier\xeda Civil",medicine:"Medicina"}},dashboard:{blob:"No hay elecciones."},createElectionDialog:{createElection:"Crear elecci\xf3n",title:"Titulo",position:"Posici\xf3n",selectCandidates:"Seleccionar candidatos de antemano",cancel:"Cancelar",create:"Crear"},userSelector:{placeholder:"Selecciona los candidatos"},adminPanel:{verifyUsers:"Verificar usuarios"},candidateCard:{cardTitle:"Candidato"},deleteElectionWarning:{dialogTitle:"Est\xe1 seguro que quiere eliminar esta elecci\xf3n?",dialogContent:"Esto no puede deshacerse",cancel:"Cancelar",continue:"Continuar"},electionDashboard:{blob:"Puede votar ahora!",raiseAlertMessage:"Ya has votado!",electionEnded:"La elecci\xf3n ha terminado",userVoted:"Ya has votado!",voteNow:"Vota ahora!",endElection:"Terminar elecci\xf3n"},electionSettings:{dialogTitle:"Ajustes de elecci\xf3n",title:"T\xedtulo",position:"Posici\xf3n",cancel:"Cancelar",accept:"Aceptar"}}},G={language:"en",locale:H()},J=Object(m.c)({name:"locales",initialState:G,reducers:{setLocale:function(e,t){e.language=t.payload,"en"===e.language?e.locale=H():e.locale=Y()}}}),z=J.actions.setLocale,K=J.reducer,Q=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.locales.language}));return Object(c.jsxs)(h.a,{style:{padding:10},children:[Object(c.jsx)(R.a,{children:"Language"}),Object(c.jsxs)(F.a,{onChange:function(t){e(z(t.target.value))},defaultValue:t,children:[Object(c.jsx)(M.a,{value:"en",children:"English"}),Object(c.jsx)(M.a,{value:"es",children:"Espa\xf1ol"})]})]})},Z=n(387),X=n(388),$=n(389),ee=n(339),te=n(419),ne=n(391),ce=n(412),ae=n(392),re=function(e){return function(){var t=Object(k.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"POST",url:"".concat(_,"/users/"),data:e}).then((function(){Object.prototype.hasOwnProperty.call(e,"is_admin")?n(W({message:"New admin has been created",variant:"success"})):n(W({message:"Request sent!",variant:"success"}))})).catch((function(e){return n(W({message:e.response.data.error,variant:"error"}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ie=function(){var e=Object(s.c)((function(e){return e.dialog.isOpen})),t=Object(s.c)((function(e){return e.locales.locale.registerDialog})),n=Object(p.b)(),a=n.handleSubmit,r=n.control,i=Object(s.b)();return Object(c.jsxs)(Z.a,{open:e,maxWidth:"xs",fullWidth:!0,children:[Object(c.jsx)(X.a,{children:t.dialogTitle}),Object(c.jsxs)("form",{onSubmit:a((function(e){i(re(e)),i(y())})),children:[Object(c.jsx)($.a,{children:Object(c.jsxs)(b.a,{container:!0,spacing:3,direction:"column",children:[Object(c.jsx)(b.a,{item:!0,xs:12,children:Object(c.jsx)(p.a,{name:"name",as:Object(c.jsx)(O.a,{name:"name",label:t.yourName,fullWidth:!0}),control:r,defaultValue:"",rules:{required:!0}})}),Object(c.jsx)(b.a,{item:!0,xs:!0,children:Object(c.jsx)(p.a,{name:"code",as:Object(c.jsx)(O.a,{type:"number",name:"code",label:t.code,fullWidth:!0}),control:r,defaultValue:"",rules:{required:!0,maxLength:10}})}),Object(c.jsx)(b.a,{item:!0,xs:!0,children:Object(c.jsx)(p.a,{name:"email",as:Object(c.jsx)(O.a,{type:"email",name:"email",label:"Email",fullWidth:!0}),control:r,defaultValue:"",rules:{required:!0}})}),Object(c.jsx)(b.a,{item:!0,xs:!0,children:Object(c.jsx)(p.a,{name:"password",as:Object(c.jsx)(O.a,{type:"password",name:"password",label:t.password,fullWidth:!0}),control:r,defaultValue:"",rules:{required:!0}})}),Object(c.jsx)(b.a,{item:!0,xs:!0,children:Object(c.jsx)(p.a,{name:"gender",as:Object(c.jsxs)(h.a,{component:"fieldset",fullWidth:!0,children:[Object(c.jsx)(ee.a,{component:"legend",children:t.gender}),Object(c.jsxs)(te.a,{"aria-label":"gender",name:"gender",children:[Object(c.jsx)(ne.a,{value:"female",label:t.female,control:Object(c.jsx)(ce.a,{})}),Object(c.jsx)(ne.a,{value:"male",label:t.male,control:Object(c.jsx)(ce.a,{})})]})]}),control:r,defaultValue:"",rules:{required:!0}})}),Object(c.jsx)(b.a,{item:!0,xs:!0,children:Object(c.jsxs)(h.a,{fullWidth:!0,children:[Object(c.jsx)(R.a,{children:"Career"}),Object(c.jsx)(p.a,{name:"career",as:Object(c.jsxs)(F.a,{fullWidth:!0,children:[Object(c.jsx)(M.a,{value:"computerScience",children:t.careers.computerScience}),Object(c.jsx)(M.a,{value:"chemistryEngineering",children:t.careers.chemistryEngineering}),Object(c.jsx)(M.a,{value:"civilEngineering",children:t.careers.civilEngineering}),Object(c.jsx)(M.a,{value:"medicine",children:t.careers.medicine})]}),control:r,rules:{required:!0}})]})}),Object(c.jsx)(b.a,{item:!0,xs:!0,children:Object(c.jsx)(p.a,{name:"semester",as:Object(c.jsx)(O.a,{type:"number",InputProps:{inputProps:{min:1,max:10}},label:"Semester",fullWidth:!0}),control:r,defaultValue:1,rules:{required:!0}})})]})}),Object(c.jsxs)(ae.a,{children:[Object(c.jsx)(f.a,{onClick:function(){return i(y())},color:"secondary",variant:"outlined",children:t.cancel}),Object(c.jsx)(f.a,{type:"submit",color:"primary",variant:"contained",children:t.send})]})]})]})},se=Object(d.a)((function(e){return{container:{padding:e.spacing(2)}}}));var oe,le=function(){var e=Object(p.b)(),t=e.handleSubmit,n=e.control,r=se(),i=Object(l.g)(),o=Object(s.b)(),u=Object(s.c)((function(e){return e.auth.authToken})),d=Object(s.c)((function(e){return e.locales.locale.login}));return Object(a.useEffect)((function(){""!==u&&i.push("/")}),[u]),Object(c.jsxs)(j.a,{className:r.container,maxWidth:"md",children:[Object(c.jsx)(b.a,{container:!0,justify:"flex-end",children:Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(Q,{})})}),Object(c.jsxs)(b.a,{children:[Object(c.jsx)(ie,{}),Object(c.jsx)("form",{action:"",onSubmit:t((function(e){o(function(e){return function(){var t=Object(k.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"POST",url:"".concat(_,"/login/"),data:e}).then((function(e){var t=e.data.token;n(D(t)),n(B({_id:e.data._id,is_admin:e.data.is_admin}))})).catch((function(e){n(W({variant:"error",message:e.response.data.error}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),i.push("/")})),children:Object(c.jsx)(b.a,{container:!0,spacing:2,alignItems:"center",justify:"center",style:{minHeight:"100vh"},children:Object(c.jsx)(b.a,{item:!0,children:Object(c.jsxs)(b.a,{container:!0,spacing:3,direction:"column",alignItems:"center",children:[Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(h.a,{children:Object(c.jsx)(p.a,{name:"email",as:Object(c.jsx)(O.a,{variant:"outlined",name:"email",label:"Email"}),control:n,defaultValue:"",rules:{required:!0,min:6,max:1024}})})}),Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(h.a,{children:Object(c.jsx)(p.a,{name:"password",as:Object(c.jsx)(O.a,{label:d.password,name:"password",type:"password",variant:"outlined"}),control:n,defaultValue:"",rules:{required:!0,min:6,max:1024}})})}),Object(c.jsxs)(b.a,{container:!0,spacing:2,children:[Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(f.a,{color:"primary",type:"submit",variant:"contained",children:d.logIn})}),Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(f.a,{color:"primary",variant:"outlined",onClick:function(){o(v())},children:d.requestAccess})})]})]})})})})]})]})},ue=n(72),de=n.n(ue),je=n(396),be=n(397),he=n(180),fe=n(46),Oe=n(398),pe=n(103),me=n.n(pe),xe=n(104),ge=n.n(xe),ve=n(167),ye=n.n(ve),Ce=n(102),Ee=n.n(Ce),we=n(29),ke=n(23),Se=n(31),Te=Object(m.b)("elections/voteStatus",function(){var e=Object(k.a)(w.a.mark((function e(t,n){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.patch("".concat(_,"/elections/vote/").concat(t.electionId),{userId:t.userId,candidateId:t.candidateId}).then((function(e){return n.dispatch(W({message:"Ballot stored!",variant:"success"})),e})).catch((function(e){return n.dispatch(W({message:e.response.data.error,variant:"error"}))}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_e=Object(m.b)("elections/endElectionStatus",function(){var e=Object(k.a)(w.a.mark((function e(t,n){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.patch("".concat(_,"/elections/end/").concat(t)).then((function(e){return n.dispatch(W({message:"The election has ended successfully",variant:"success"})),e})).catch((function(e){n.dispatch(W({message:e.response.data.error,variant:"error"}))}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ie=Object(m.c)({name:"elections",initialState:{elections:[],currentElection:{},selectedCandidates:[]},reducers:{fetchElections:function(e,t){e.elections=t.payload},saveElection:function(e,t){e.elections.push(t.payload)},setCurrentElection:function(e,t){e.currentElection=e.elections.filter((function(e){return e._id===t.payload}))[0]},emptyCurrentElection:function(e){e.currentElection={}},deleteElection:function(e,t){e.elections=e.elections.filter((function(e){return e._id!==t.payload})),e.currentElection={}},editElection:function(e,t){e.elections=function(e,t){var n=function(e,t){return e.filter((function(e){return e._id!==t}))}(e,t._id),c=Object(Se.a)({},t);return[].concat(Object(ke.a)(n),[c])}(e.elections,t.payload),e.currentElection=t.payload},setCandidates:function(e,t){e.selectedCandidates=t.payload}},extraReducers:(oe={},Object(we.a)(oe,Te.fulfilled,(function(e,t){var n=e.currentElection.candidates.filter((function(e){return e._id===t.payload.candidateId}));n.votes+=1,e.currentElection.candidates.filter((function(e){return e._id!==t.payload.candidateId})),e.currentElection.candidates.push(n),e.currentElection.registeredVotes.push(t.payload.userId),e.elections.filter((function(t){return t._id!==e.currentElection._id})),e.elections.push(e.currentElection)})),Object(we.a)(oe,_e.fulfilled,(function(e){e.currentElection.status="finished",e.elections.filter((function(t){return t._id!==e.currentElection._id})),e.elections.push(e.currentElection)})),oe)}),Ae=Ie.actions,We=Ae.deleteElection,Ne=Ae.editElection,Ue=Ae.emptyCurrentElection,Pe=Ae.fetchElections,Ve=Ae.saveElection,qe=Ae.setCurrentElection,De=Ae.setCandidates,Be=Ie.reducer,Le=Object(m.c)({name:"panel",initialState:{open:!1},reducers:{openPanel:function(e){e.open=!0},closePanel:function(e){e.open=!1}}}),Re=Le.actions,Fe=Re.closePanel,Me=Re.openPanel,He=Le.reducer,Ye=Object(d.a)((function(){return{navbarRightButtons:{marginLeft:"auto"},navbar:{marginBottom:20}}})),Ge=function(e){var t=e.actionIcon,n=e.path,a=Ye(),r=Object(s.b)(),i=Object(l.g)();return Object(c.jsx)("div",{className:"appbar-wrapper",children:Object(c.jsx)(je.a,{position:"static",className:a.navbar,children:Object(c.jsxs)(be.a,{children:[Object(c.jsx)(he.a,{edge:"start",color:"inherit",onClick:function(){"back"===t?(r(Ue()),i.push(n.from)):i.push("/")},children:"back"===t?Object(c.jsx)(Ee.a,{}):Object(c.jsx)(me.a,{})}),Object(c.jsx)(fe.a,{variant:"h5",children:"Voteapp"}),Object(c.jsxs)("div",{className:a.navbarRightButtons,children:[Object(c.jsx)(Oe.a,{title:"Admin Panel",children:Object(c.jsx)(he.a,{color:"inherit",onClick:function(){r(Me())},children:Object(c.jsx)(ge.a,{})})}),Object(c.jsx)(Oe.a,{title:"Logout",children:Object(c.jsx)(he.a,{color:"inherit",onClick:function(){r((function(e){localStorage.removeItem("AUTH_TOKEN"),e(q())})),i.push("/login")},children:Object(c.jsx)(ye.a,{})})})]})]})})})};Ge.defaultProps={actionIcon:"home",path:{from:""}};var Je=Ge,ze=n(40),Ke=n(399),Qe=n(414),Ze=n(420),Xe=function(){var e=Object(s.c)((function(e){return e.users.users})),t=Object(s.b)(),n=Object(s.c)((function(e){return e.locales.locale.userSelector}));return Object(c.jsx)(Qe.a,{multiple:!0,options:e,getOptionLabel:function(e){return e.name},onChange:function(e,n){return t(De(n))},renderTags:function(e,t){return e.map((function(e,n){return Object(c.jsx)(Ze.a,Object(Se.a)({variant:"default",label:e.name},t({index:n})))}))},renderInput:function(e){return Object(c.jsx)(O.a,Object(Se.a)(Object(Se.a)({},e),{},{variant:"outlined",placeholder:n.placeholder}))}})},$e=Object(m.b)("users/fetchUsersStatus",function(){var e=Object(k.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T.a.get("".concat(_,"/users/")).then((function(e){return e.data})).catch((function(e){return t.dispatch(W({message:e.response.data.error,variant:"error"}))})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),et=function(){var e=Object(p.b)(),t=e.handleSubmit,n=e.control,r=Object(a.useState)(!0),i=Object(ze.a)(r,1)[0],o=Object(s.b)(),l=Object(s.c)((function(e){return e.dialog.isOpen})),u=Object(s.c)((function(e){return e.locales.locale.createElectionDialog})),d=Object(s.c)((function(e){return e.election.selectedCandidates})),j=function(){return o(y())};return Object(a.useEffect)((function(){return o($e())}),[]),Object(c.jsxs)(Z.a,{open:l,onClose:j,fullWidth:!0,maxWidth:"xs",children:[Object(c.jsx)(X.a,{children:u.createElection}),Object(c.jsxs)("form",{action:"",onSubmit:t((function(e){o(function(e){return function(){var t=Object(k.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"POST",url:"".concat(_,"/elections"),data:e}).then((function(e){n(Ve(e.data))})).catch((function(e){n(W({variant:"error",message:e.response.data.error}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(Object(Se.a)(Object(Se.a)({},e),{},{candidates:d}))),j()})),children:[Object(c.jsx)($.a,{children:Object(c.jsxs)(b.a,{container:!0,direction:"column",children:[Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(p.a,{name:"title",as:Object(c.jsx)(O.a,{autoFocus:!0,margin:"dense",id:"election-title",label:u.title,type:"text",fullWidth:!0,variant:"filled",name:"title"}),control:n,defaultValue:"",rules:{required:!0,min:6}})}),Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(p.a,{name:"position",as:Object(c.jsx)(O.a,{autoFocus:!0,margin:"dense",id:"election-position",label:u.position,type:"text",fullWidth:!0,variant:"filled",name:"position"}),control:n,defaultValue:"",rules:{required:!0,min:6}})}),Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(ne.a,{disabled:!0,control:Object(c.jsx)(Ke.a,{checked:i}),label:u.selectCandidates})}),i&&Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(Xe,{})})]})}),Object(c.jsxs)(ae.a,{children:[Object(c.jsx)(f.a,{color:"primary",onClick:j,children:u.cancel}),Object(c.jsx)(f.a,{color:"primary",type:"submit",children:u.create})]})]})]})},tt=n(400),nt=n(401),ct=n(402),at=Object(d.a)({card:{width:275},editButton:{marginLeft:"auto"}}),rt=function(e){var t=e.data,n=at(),a=Object(l.g)(),r=Object(s.b)();return Object(c.jsx)(tt.a,{className:n.card,variant:"outlined",onClick:function(){r(qe(t._id)),a.push("/election")},children:Object(c.jsx)(nt.a,{children:Object(c.jsxs)(ct.a,{children:[Object(c.jsx)(fe.a,{variant:"h5",children:t.title}),Object(c.jsx)(fe.a,{children:t.position})]})})})},it=n(403),st=n(168),ot=n.n(st),lt=Object(d.a)((function(){return{fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"}}})),ut=function(){var e=lt(),t=Object(s.b)();return Object(c.jsx)("div",{className:"fab-wrapper",children:Object(c.jsx)(it.a,{color:"secondary","aria-label":"add",className:e.fab,onClick:function(){return t(v())},children:Object(c.jsx)(ot.a,{})})})},dt=function(e){var t=e.text;return Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(c.jsx)(fe.a,{variant:"h4",color:"secondary",style:{position:"absolute",margin:"0 auto",alignSelf:"center",justifySelf:"center"},children:t}),Object(c.jsx)("svg",{viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",width:"500px",height:"400px",style:{},children:Object(c.jsx)("path",{fill:"#8CB3FF",d:"M26.8,-48.5C38.8,-39.6,55.2,-40.5,66.5,-34C77.8,-27.6,84,-13.8,83.2,-0.5C82.3,12.8,74.5,25.6,66.5,37.9C58.5,50.1,50.5,61.8,39.4,67.7C28.3,73.6,14.1,73.8,1.5,71.2C-11.1,68.6,-22.3,63.3,-33.1,57.2C-43.8,51.1,-54.3,44.2,-58.2,34.5C-62.1,24.9,-59.5,12.4,-56.8,1.6C-54,-9.3,-51.2,-18.6,-48,-29.6C-44.9,-40.7,-41.6,-53.4,-33.5,-64.6C-25.5,-75.8,-12.7,-85.4,-2.6,-80.8C7.4,-76.2,14.9,-57.5,26.8,-48.5Z",transform:"translate(100 100)"})})]})},jt=function(){var e=Object(s.b)();Object(a.useEffect)(Object(k.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e(function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(_,"/elections/")).then((function(e){return t(Pe(e.data))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(n){e(W({variant:"error",message:n}))}case 1:case"end":return t.stop()}}),t)}))),[]);var t=Object(s.c)((function(e){return e.election.elections})),n=Object(s.c)((function(e){return e.auth.isAdmin})),r=Object(s.c)((function(e){return e.locales.locale.dashboard}));return Object(c.jsxs)("div",{className:"dashboard-wrapper",children:[n&&Object(c.jsx)(ut,{}),Object(c.jsx)(Je,{}),Object(c.jsx)(et,{}),0===t.length&&Object(c.jsx)(dt,{text:r.blob}),Object(c.jsx)(b.a,{container:!0,spacing:2,justify:"center",alignItems:"center",style:{margin:0},xs:12,children:t.map((function(e){return Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(rt,{data:{_id:e._id,title:e.title,position:e.position}})},de.a.generate())}))})]})},bt=n(177),ht=function(e){var t=e.children,n=Object(bt.a)(e,["children"]),a=Object(s.c)((function(e){return e.auth.authToken}));return Object(c.jsx)(l.b,Object(Se.a)(Object(Se.a)({},n),{},{render:function(){return""!==a?t:Object(c.jsx)(l.a,{to:"/login"})}}))},ft=n(169),Ot=n.n(ft),pt=function(e){var t=e.open,n=e.setIsWarningOpen,a=Object(s.b)(),r=Object(s.c)((function(e){return e.election.currentElection._id})),i=Object(s.c)((function(e){return e.locales.locale.deleteElectionWarning})),o=Object(l.g)();return Object(c.jsxs)(Z.a,{open:t,children:[Object(c.jsx)(X.a,{children:i.dialogTitle}),Object(c.jsx)($.a,{children:i.dialogContent}),Object(c.jsxs)(ae.a,{children:[Object(c.jsx)(f.a,{onClick:function(){return n(!1)},color:"secondary",children:i.cancel}),Object(c.jsx)(f.a,{onClick:function(){try{a(function(e){return function(){var t=Object(k.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"DELETE",url:"".concat(_,"/elections/").concat(e)}).then((function(){return n(We(e))})).catch((function(e){n(W({variant:"error",message:e.response.data.error}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r)),n(!1),a(y()),o.push("/")}catch(e){a(W({variant:"error",message:e}))}},children:i.continue})]})]})},mt=function(){var e=Object(p.b)(),t=e.handleSubmit,n=e.control,r=Object(a.useState)(!1),i=Object(ze.a)(r,2),o=i[0],l=i[1],u=Object(s.c)((function(e){return e.dialog.isOpen})),d=Object(s.c)((function(e){return e.locales.locale.electionSettings})),j=Object(s.c)((function(e){return e.election.currentElection})),h=Object(s.b)();return Object(c.jsxs)("div",{className:"election-settings-wrapper",children:[Object(c.jsx)(pt,{open:o,setIsWarningOpen:l}),Object(c.jsx)(Z.a,{open:u,fullWidth:!0,maxWidth:"xs",children:Object(c.jsxs)("form",{onSubmit:t((function(e){try{h(function(e){return function(){var t=Object(k.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"PATCH",url:"".concat(_,"/elections/").concat(e._id),data:e}).then((function(){return n(Ne(e))})).catch((function(e){n(W({variant:"error",message:e.response.data.error}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(Object(Se.a)(Object(Se.a)({},j),e))),h(y())}catch(t){h(W({variant:"error",message:t}))}})),children:[Object(c.jsx)(X.a,{children:d.dialogTitle}),Object(c.jsx)($.a,{children:Object(c.jsxs)(b.a,{container:!0,direction:"column",children:[Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(p.a,{name:"title",as:Object(c.jsx)(O.a,{margin:"dense",label:d.title,type:"text",fullWidth:!0,variant:"filled",name:"title"}),control:n,defaultValue:"",rules:{required:!0,min:6}})}),Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(p.a,{name:"position",as:Object(c.jsx)(O.a,{margin:"dense",label:d.position,type:"text",fullWidth:!0,variant:"filled",name:"position"}),rules:{required:!0,min:6},defaultValue:"",control:n})})]})}),Object(c.jsx)(ae.a,{children:Object(c.jsxs)(b.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(he.a,{onClick:function(){return l(!0)},children:Object(c.jsx)(Ot.a,{})})}),Object(c.jsx)(b.a,{item:!0,children:Object(c.jsxs)("div",{children:[Object(c.jsx)(f.a,{color:"primary",onClick:function(){return h(y())},children:d.cancel}),Object(c.jsx)(f.a,{color:"primary",type:"submit",children:d.accept})]})})]})})]})})]})},xt=n(170),gt=function(e){var t=e.map((function(e){return e.votes}));return{labels:e.map((function(e){return e.name})),datasets:[{label:"Number of votes",data:t,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]}},vt=function(){var e=Object(s.c)((function(e){return e.election.currentElection.candidates}));return Object(c.jsx)(xt.a,{data:gt(e),height:400,width:75,options:{maintainAspectRatio:!1}})},yt=Object(d.a)((function(){return{electionWrapper:{height:"100vh"},banner:{margin:0},banner__title:{marginTop:25,marginBottom:10},banner__position:{marginBottom:25}}})),Ct=function(){var e=Object(s.c)((function(e){return e.election.currentElection})),t=Object(s.c)((function(e){return e.auth})),n=Object(s.c)((function(e){return e.locales.locale.electionDashboard})),r=1===e.registeredVotes.filter((function(e){return e===t._id})).length,i=yt(),o=Object(s.b)(),u=Object(l.g)();Object(a.useEffect)((function(){0===Object.keys(e).length&&u.push("/")}));return Object(c.jsxs)("div",{className:i.electionWrapper,children:[Object(c.jsx)(Je,{actionIcon:"back",path:{from:"/"}}),Object(c.jsx)(mt,{}),t.isAdmin&&Object(c.jsx)(ut,{}),Object(c.jsxs)(j.a,{maxWidth:"md",className:i.banner,children:[Object(c.jsx)(fe.a,{variant:"h4",className:i.banner__title,children:e.title}),Object(c.jsx)(fe.a,{variant:"h5",className:i.banner__position,children:e.position}),Object(c.jsx)(f.a,{color:"secondary",variant:"contained",onClick:function(){t.isAdmin?o(r?W({message:n.raiseAlertMessage,variant:"warning"}):_e(e._id)):u.push("/vote")},disabled:"finished"===e.status||r,children:"finished"===e.status?n.electionEnded:t.isAdmin?n.endElection:r?n.userVoted:n.voteNow}),t.isAdmin&&Object(c.jsx)(he.a,{onClick:function(){return o(v())},children:Object(c.jsx)(ge.a,{})})]}),Object(c.jsx)("div",{className:"winner-graph",children:"finished"===e.status?Object(c.jsx)(vt,{}):Object(c.jsx)(dt,{text:n.blob})})]})},Et=n(415),wt=n(413),kt=function(){var e=Object(s.c)((function(e){return e.alert})),t=e.open,n=e.message,a=e.variant,r=Object(s.b)(),i=function(){r(N())};return Object(c.jsx)(Et.a,{autoHideDuration:6e3,open:t,onClose:i,children:Object(c.jsx)(wt.a,{elevation:6,variant:"filled",severity:a,onClose:i,children:n})})},St=n(342),Tt=n(407),_t=n(408),It=n(421),At=n(385),Wt=n(174),Nt=n.n(Wt),Ut=n(175),Pt=n.n(Ut),Vt=n(416),qt=n(404),Dt=n(405),Bt=n(406),Lt=n(173),Rt=n.n(Lt),Ft=Object(m.c)({name:"unverified",initialState:{unverifiedUsers:[]},reducers:{fetchUnverifiedUsers:function(e,t){e.unverifiedUsers=t.payload},verifyUser:function(e,t){e.unverifiedUsers=e.unverifiedUsers.filter((function(e){return e._id!==t.payload}))},denyUser:function(e,t){e.unverifiedUsers=e.unverifiedUsers.filter((function(e){return e._id!==t.payload}))}}}),Mt=Ft.actions,Ht=Mt.denyUser,Yt=Mt.fetchUnverifiedUsers,Gt=Mt.verifyUser,Jt=Ft.reducer,zt=Object(d.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},summary:{backgroundColor:"#d5d5d5"},summaryText:{margin:e.spacing(1)},details:{flexDirection:"column"}}})),Kt=function(e){var t=e.data,n=zt(),a=Object(s.b)();return Object(c.jsxs)(Vt.a,{className:n.root,children:[Object(c.jsx)(qt.a,{expandIcon:Object(c.jsx)(Rt.a,{}),className:n.summary,children:Object(c.jsx)(fe.a,{variant:"h5",children:t.name})}),Object(c.jsxs)(Dt.a,{className:n.details,children:[Object(c.jsxs)(fe.a,{gutterBottom:!0,children:["Code:",t.code]}),Object(c.jsx)("br",{}),Object(c.jsxs)(fe.a,{gutterBottom:!0,children:["Email:",t.email]}),Object(c.jsx)("br",{}),Object(c.jsxs)(fe.a,{children:["Gender:",t.gender]})]}),Object(c.jsxs)(Bt.a,{children:[Object(c.jsx)(f.a,{color:"secondary",variant:"outlined",onClick:function(){var e;a((e=t._id,function(){var t=Object(k.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"DELETE",url:"".concat(_,"/users/deny/").concat(e)}).then((function(t){var c=t.data;n(Ht(e)),W({message:c.message,variant:"success"})})).catch((function(e){n(W({message:e.response.data.error,variant:"error"}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:"Deny"}),Object(c.jsx)(f.a,{type:"submit",color:"primary",variant:"contained",onClick:function(){var e;a((e=t._id,function(){var t=Object(k.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"PATCH",url:"".concat(_,"/users/verify/").concat(e)}).then((function(t){var c=t.data;n(Gt(e)),W({message:c.message,variant:"success"})})).catch((function(e){n(W({message:e.response.data.error,variant:"error"}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:"Accept"})]})]})},Qt=function(e){var t=e.isOpen,n=e.onClose,r=e.unverifiedUsers,i=Object(s.b)();return 0===r.length&&n(),Object(a.useEffect)((function(){i(function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T()({method:"GET",url:"".concat(_,"/users/unverified")}).then((function(e){var n=e.data;t(Yt(n))})).catch((function(e){return t(W({message:e.response.data.error,variant:"error"}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(c.jsx)(Z.a,{open:t,onClose:n,fullWidth:!0,children:Object(c.jsx)($.a,{children:r.map((function(e){return Object(c.jsx)(Kt,{data:e},Object(ue.generate)())}))})})},Zt=function(e){var t=e.handleAddUserClick,n=e.itemText;return Object(c.jsxs)(St.a,{button:!0,onClick:t,children:[Object(c.jsx)(Tt.a,{children:Object(c.jsx)(Nt.a,{})}),Object(c.jsx)(_t.a,{primary:n})]})},Xt=function(){var e=Object(a.useState)(!1),t=Object(ze.a)(e,2),n=t[0],r=t[1],i=Object(s.b)(),o=Object(s.c)((function(e){return e.panel.open})),l=Object(s.c)((function(e){return e.locales.locale.adminPanel})),u=Object(s.c)((function(e){return e.auth.isAdmin})),d=Object(s.c)((function(e){return e.unverified.unverifiedUsers}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(It.a,{open:o,anchor:"right",onClose:function(){return i(Fe())},children:Object(c.jsxs)(At.a,{children:[u&&Object(c.jsx)(Zt,{handleAddUserClick:function(){0===d.length?i(W({message:"There are no users left to check",variant:"warning"})):r(!0)},itemText:l.verifyUsers}),Object(c.jsxs)(St.a,{children:[Object(c.jsx)(Tt.a,{children:Object(c.jsx)(Pt.a,{})}),Object(c.jsx)(Q,{})]})]})}),Object(c.jsx)(Qt,{isOpen:n,onClose:function(){return r(!1)},unverifiedUsers:d})]})},$t=n(409),en=n(422),tn=n(410),nn=function(e){var t=e.data,n=e.onClick,a=Object(s.c)((function(e){return e.locales.locale.candidateCard}));return Object(c.jsxs)(tt.a,{style:{maxWidth:500,width:250},children:[Object(c.jsx)($t.a,{avatar:Object(c.jsx)(en.a,{children:t.name[0]}),title:a.candidateCard}),Object(c.jsxs)(ct.a,{children:[Object(c.jsx)(fe.a,{children:t.name}),Object(c.jsx)(fe.a,{children:t.code}),Object(c.jsxs)(b.a,{container:!0,justify:"space-evenly",style:{marginTop:10},children:[Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(fe.a,{children:t.career})}),Object(c.jsx)(b.a,{item:!0,children:Object(c.jsx)(fe.a,{children:" "!==t.semester?"Semester: ".concat(t.semester):""})})]})]}),Object(c.jsx)(tn.a,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(c.jsx)(he.a,{onClick:function(){return n(t._id)},children:Object(c.jsx)(me.a,{})})})]})},cn=Object(d.a)((function(){return{votingPanel:{height:"100vh",display:"flex",justifyContent:"space-evenly",alignItems:"center"}}})),an=function(){var e=Object(s.c)((function(e){return e.election.currentElection.candidates}))||[],t=Object(s.c)((function(e){return e.election.currentElection._id})),n=Object(s.c)((function(e){return e.auth._id})),r=cn(),i=Object(l.g)(),o=Object(s.b)(),u=function(e){o(Te({electionId:t,userId:n,candidateId:e})),i.push("/election")};return Object(a.useEffect)((function(){0===e.length&&i.push("/")})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(he.a,{onClick:function(){i.push("/election")},children:Object(c.jsx)(Ee.a,{})}),Object(c.jsx)("div",{className:r.votingPanel,children:e.map((function(e){return Object(c.jsx)(nn,{data:e,onClick:u},Object(ue.generate)())}))})]})},rn=Object(d.a)({app:{height:"100vh"}});var sn=function(){var e=rn();return Object(c.jsxs)("div",{className:e.app,children:[Object(c.jsx)(Xt,{}),Object(c.jsx)(kt,{}),Object(c.jsx)(u.a,{children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:"/login",children:Object(c.jsx)(le,{})}),Object(c.jsx)(ht,{path:"/vote",children:Object(c.jsx)(an,{})}),Object(c.jsx)(ht,{path:"/election",children:Object(c.jsx)(Ct,{})}),Object(c.jsx)(ht,{path:"/",children:Object(c.jsx)(jt,{})})]})})]})},on=n(42),ln=Object(m.c)({name:"users",initialState:{users:[]},reducers:{setUser:function(e,t){e.users=t.payload}},extraReducers:Object(we.a)({},$e.fulfilled,(function(e,t){e.users=t.payload}))}),un=(ln.actions.setUser,ln.reducer),dn=Object(on.c)({auth:L,dialog:C,election:Be,alert:U,panel:He,unverified:Jt,users:un,locales:K}),jn=Object(m.a)({reducer:dn});Object(o.config)(),i.a.render(Object(c.jsx)(s.a,{store:jn,children:Object(c.jsx)(sn,{})}),document.getElementById("root"))}},[[337,1,2]]]);
//# sourceMappingURL=main.61115755.chunk.js.map