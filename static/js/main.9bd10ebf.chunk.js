(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{197:function(e,t,n){},204:function(e,t,n){},337:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(0),r=n(15),i=n.n(r),o=(n(197),n(7)),s=n(165),l=(n(204),n(13)),u=n(176),d=n(393),j=n(417),b=n(394),f=n(384),h=n(387),O=n(392),p=n(25),m=n(9),x=n.n(m),g=n(16),v=n(27),y=n.n(v),C="https://votapp-backend.herokuapp.com/api",E=n(17),w=Object(E.c)({name:"alerts",initialState:{open:!1,message:"",variant:"info"},reducers:{raiseAlert:function(e,t){e.open=!0,e.message=t.payload.message,e.variant=t.payload.variant},closeAlert:function(e,t){e.open=!1,e.message="",e.variant=""}}}),k=w.actions,T=k.raiseAlert,S=k.closeAlert,_=w.reducer,A=Object(E.c)({name:"auth",initialState:{authToken:"",isAdmin:"",_id:""},reducers:{setAuthToken:function(e,t){e.authToken=t.payload},logOut:function(e){e.authToken="",e.isAdmin=!1,e._id=""},setData:function(e,t){e.isAdmin=t.payload.is_admin,e._id=t.payload._id}}}),I=A.actions,N=I.logOut,W=I.setAuthToken,P=I.setData,U=A.reducer,V=Object(E.c)({name:"dialog",initialState:{isOpen:!1},reducers:{openDialog:function(e){e.isOpen=!0},closeDialog:function(e){e.isOpen=!1}}}),D=V.actions,q=D.openDialog,B=D.closeDialog,L=V.reducer,F=n(379),R=n(382),Y=n(383),M=n(341),H=n(419),G=n(390),J=n(412),z=n(391),K=function(){var e=Object(o.c)((function(e){return e.dialog.isOpen})),t=Object(o.c)((function(e){return e.locales.locale.registerDialog})),n=Object(p.b)(),a=n.handleSubmit,r=n.control,i=Object(o.b)();return Object(c.jsxs)(F.a,{open:e,maxWidth:"xs",fullWidth:!0,children:[Object(c.jsx)(R.a,{children:t.dialogTitle}),Object(c.jsxs)("form",{onSubmit:a((function(e){i(function(e){return function(){var t=Object(g.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y()({method:"POST",url:"".concat(C,"/users/"),data:e}).then((function(){Object.prototype.hasOwnProperty.call(e,"is_admin")?n(T({message:"New admin has been created",variant:"success"})):n(T({message:"Request sent!",variant:"success"}))})).catch((function(e){return n(T({message:e.response.data.error,variant:"error"}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),i(B())})),children:[Object(c.jsx)(Y.a,{children:Object(c.jsxs)(f.a,{container:!0,spacing:3,direction:"column",children:[Object(c.jsx)(f.a,{item:!0,xs:12,children:Object(c.jsx)(p.a,{name:"name",as:Object(c.jsx)(j.a,{name:"name",label:t.yourNae,fullWidth:!0}),control:r,defaultValue:"",rules:{required:!0}})}),Object(c.jsx)(f.a,{item:!0,xs:!0,children:Object(c.jsx)(p.a,{name:"code",as:Object(c.jsx)(j.a,{type:"number",name:"code",label:t.code,fullWidth:!0}),control:r,defaultValue:"",rules:{required:!0,maxLength:10}})}),Object(c.jsx)(f.a,{item:!0,xs:!0,children:Object(c.jsx)(p.a,{name:"email",as:Object(c.jsx)(j.a,{type:"email",name:"email",label:"Email",fullWidth:!0}),control:r,defaultValue:"",rules:{required:!0}})}),Object(c.jsx)(f.a,{item:!0,xs:!0,children:Object(c.jsx)(p.a,{name:"password",as:Object(c.jsx)(j.a,{type:"password",name:"password",label:t.password,fullWidth:!0}),control:r,defaultValue:"",rules:{required:!0}})}),Object(c.jsx)(f.a,{item:!0,xs:!0,children:Object(c.jsx)(p.a,{name:"gender",as:Object(c.jsxs)(h.a,{component:"fieldset",fullWidth:!0,children:[Object(c.jsx)(M.a,{component:"legend",children:t.gender}),Object(c.jsxs)(H.a,{"aria-label":"gender",name:"gender",children:[Object(c.jsx)(G.a,{value:"female",label:t.female,control:Object(c.jsx)(J.a,{})}),Object(c.jsx)(G.a,{value:"male",label:t.male,control:Object(c.jsx)(J.a,{})})]})]}),control:r,defaultValue:"",rules:{required:!0}})})]})}),Object(c.jsxs)(z.a,{children:[Object(c.jsx)(O.a,{onClick:function(){return i(B())},color:"secondary",variant:"outlined",children:t.cancel}),Object(c.jsx)(O.a,{type:"submit",color:"primary",variant:"contained",children:t.send})]})]})]})},Z=Object(d.a)((function(e){return{container:{padding:e.spacing(2)}}}));var Q,X=function(){var e=Object(p.b)(),t=e.handleSubmit,n=e.control,r=Z(),i=Object(l.g)(),s=Object(o.b)(),u=Object(o.c)((function(e){return e.auth.authToken})),d=Object(o.c)((function(e){return e.locales.locale.login}));return Object(a.useEffect)((function(){""!==u&&i.push("/")}),[u]),Object(c.jsxs)(b.a,{className:r.container,maxWidth:"md",children:[Object(c.jsx)("form",{action:"",onSubmit:t((function(e){s(function(e){return function(){var t=Object(g.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y()({method:"POST",url:"".concat(C,"/login/"),data:e}).then((function(e){var t=e.data.token;n(W(t)),n(P({_id:e.data._id,is_admin:e.data.is_admin}))})).catch((function(e){n(T({variant:"error",message:e.response.data.error}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),i.push("/")})),children:Object(c.jsx)(f.a,{container:!0,spacing:2,alignItems:"center",justify:"center",style:{minHeight:"100vh"},children:Object(c.jsx)(f.a,{item:!0,children:Object(c.jsxs)(f.a,{container:!0,spacing:3,direction:"column",alignItems:"center",children:[Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(h.a,{children:Object(c.jsx)(p.a,{name:"email",as:Object(c.jsx)(j.a,{variant:"outlined",name:"email",label:"Email"}),control:n,defaultValue:"",rules:{required:!0,min:6,max:1024}})})}),Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(h.a,{children:Object(c.jsx)(p.a,{name:"password",as:Object(c.jsx)(j.a,{label:d.password,name:"password",type:"password",variant:"outlined"}),control:n,defaultValue:"",rules:{required:!0,min:6,max:1024}})})}),Object(c.jsxs)(f.a,{container:!0,spacing:2,children:[Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(O.a,{color:"primary",type:"submit",variant:"contained",children:d.logIn})}),Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(O.a,{color:"primary",variant:"outlined",onClick:function(){s(q())},children:d.requestAccess})})]})]})})})}),Object(c.jsx)(K,{})]})},$=n(72),ee=n.n($),te=n(395),ne=n(396),ce=n(180),ae=n(46),re=n(397),ie=n(103),oe=n.n(ie),se=n(104),le=n.n(se),ue=n(167),de=n.n(ue),je=n(102),be=n.n(je),fe=n(29),he=n(22),Oe=n(31),pe=Object(E.b)("elections/voteStatus",function(){var e=Object(g.a)(x.a.mark((function e(t,n){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.patch("".concat(C,"/elections/vote/").concat(t.electionId),{userId:t.userId,candidateId:t.candidateId}).then((function(e){return n.dispatch(T({message:"Ballot stored!",variant:"success"})),e})).catch((function(e){return n.dispatch(T({message:e.response.data.error,variant:"error"}))}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),me=Object(E.b)("elections/endElectionStatus",function(){var e=Object(g.a)(x.a.mark((function e(t,n){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.patch("".concat(C,"/elections/end/").concat(t)).then((function(e){return n.dispatch(T({message:"The election has ended successfully",variant:"success"})),e})).catch((function(e){n.dispatch(T({message:e.response.data.error,variant:"error"}))}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),xe=Object(E.c)({name:"elections",initialState:{elections:[],currentElection:{},selectedCandidates:[]},reducers:{fetchElections:function(e,t){e.elections=t.payload},saveElection:function(e,t){e.elections.push(t.payload)},setCurrentElection:function(e,t){e.currentElection=e.elections.filter((function(e){return e._id===t.payload}))[0]},emptyCurrentElection:function(e){e.currentElection={}},deleteElection:function(e,t){e.elections=e.elections.filter((function(e){return e._id!==t.payload})),e.currentElection={}},editElection:function(e,t){e.elections=function(e,t){var n=function(e,t){return e.filter((function(e){return e._id!==t}))}(e,t._id),c=Object(Oe.a)({},t);return[].concat(Object(he.a)(n),[c])}(e.elections,t.payload),e.currentElection=t.payload},setCandidates:function(e,t){e.selectedCandidates=t.payload}},extraReducers:(Q={},Object(fe.a)(Q,pe.fulfilled,(function(e,t){var n=e.currentElection.candidates.filter((function(e){return e._id===t.payload.candidateId}));n.votes+=1,e.currentElection.candidates.filter((function(e){return e._id!==t.payload.candidateId})),e.currentElection.candidates.push(n),e.currentElection.registeredVotes.push(t.payload.userId),e.elections.filter((function(t){return t._id!==e.currentElection._id})),e.elections.push(e.currentElection)})),Object(fe.a)(Q,me.fulfilled,(function(e){e.currentElection.status="finished",e.elections.filter((function(t){return t._id!==e.currentElection._id})),e.elections.push(e.currentElection)})),Q)}),ge=xe.actions,ve=ge.deleteElection,ye=ge.editElection,Ce=ge.emptyCurrentElection,Ee=ge.fetchElections,we=ge.saveElection,ke=ge.setCurrentElection,Te=ge.setCandidates,Se=xe.reducer,_e=Object(E.c)({name:"panel",initialState:{open:!1},reducers:{openPanel:function(e){e.open=!0},closePanel:function(e){e.open=!1}}}),Ae=_e.actions,Ie=Ae.closePanel,Ne=Ae.openPanel,We=_e.reducer,Pe=Object(d.a)((function(){return{navbarRightButtons:{marginLeft:"auto"},navbar:{marginBottom:20}}})),Ue=function(e){var t=e.actionIcon,n=e.path,a=Pe(),r=Object(o.b)(),i=Object(l.g)(),s=Object(o.c)((function(e){return e.auth.isAdmin}));return Object(c.jsx)("div",{className:"appbar-wrapper",children:Object(c.jsx)(te.a,{position:"static",className:a.navbar,children:Object(c.jsxs)(ne.a,{children:[Object(c.jsx)(ce.a,{edge:"start",color:"inherit",onClick:function(){"back"===t?(r(Ce()),i.push(n.from)):i.push("/")},children:"back"===t?Object(c.jsx)(be.a,{}):Object(c.jsx)(oe.a,{})}),Object(c.jsx)(ae.a,{variant:"h5",children:"Voteapp"}),Object(c.jsxs)("div",{className:a.navbarRightButtons,children:[Object(c.jsx)(re.a,{title:"Admin Panel",children:Object(c.jsx)(ce.a,{color:"inherit",onClick:function(){s&&r(Ne())},children:Object(c.jsx)(le.a,{})})}),Object(c.jsx)(re.a,{title:"Logout",children:Object(c.jsx)(ce.a,{color:"inherit",onClick:function(){r((function(e){localStorage.removeItem("AUTH_TOKEN"),e(N())})),i.push("/login")},children:Object(c.jsx)(de.a,{})})})]})]})})})};Ue.defaultProps={actionIcon:"home",path:{from:""}};var Ve=Ue,De=n(40),qe=n(398),Be=n(414),Le=n(420),Fe=function(){var e=Object(o.c)((function(e){return e.users.users})),t=Object(o.b)(),n=Object(o.c)((function(e){return e.locales.locale.userSelector}));return Object(c.jsx)(Be.a,{multiple:!0,options:e,getOptionLabel:function(e){return e.name},onChange:function(e,n){return t(Te(n))},renderTags:function(e,t){return e.map((function(e,n){return Object(c.jsx)(Le.a,Object(Oe.a)({variant:"default",label:e.name},t({index:n})))}))},renderInput:function(e){return Object(c.jsx)(j.a,Object(Oe.a)(Object(Oe.a)({},e),{},{variant:"outlined",placeholder:n.placeholder}))}})},Re=Object(E.b)("users/fetchUsersStatus",function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.a.get("".concat(C,"/users/")).then((function(e){return e.data})).catch((function(e){return t.dispatch(T({message:e.response.data.error,variant:"error"}))})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ye=function(){var e=Object(p.b)(),t=e.handleSubmit,n=e.control,r=Object(a.useState)(!0),i=Object(De.a)(r,1)[0],s=Object(o.b)(),l=Object(o.c)((function(e){return e.dialog.isOpen})),u=Object(o.c)((function(e){return e.locales.locale.createElectionDialog})),d=Object(o.c)((function(e){return e.election.selectedCandidates})),b=function(){return s(B())};return Object(a.useEffect)((function(){return s(Re())}),[]),Object(c.jsxs)(F.a,{open:l,onClose:b,fullWidth:!0,maxWidth:"xs",children:[Object(c.jsx)(R.a,{children:u.createElection}),Object(c.jsxs)("form",{action:"",onSubmit:t((function(e){s(function(e){return function(){var t=Object(g.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y()({method:"POST",url:"".concat(C,"/elections"),data:e}).then((function(e){n(we(e.data))})).catch((function(e){n(T({variant:"error",message:e.response.data.error}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(Object(Oe.a)(Object(Oe.a)({},e),{},{candidates:d}))),b()})),children:[Object(c.jsx)(Y.a,{children:Object(c.jsxs)(f.a,{container:!0,direction:"column",children:[Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(p.a,{name:"title",as:Object(c.jsx)(j.a,{autoFocus:!0,margin:"dense",id:"election-title",label:u.title,type:"text",fullWidth:!0,variant:"filled",name:"title"}),control:n,defaultValue:"",rules:{required:!0,min:6}})}),Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(p.a,{name:"position",as:Object(c.jsx)(j.a,{autoFocus:!0,margin:"dense",id:"election-position",label:u.position,type:"text",fullWidth:!0,variant:"filled",name:"position"}),control:n,defaultValue:"",rules:{required:!0,min:6}})}),Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(G.a,{disabled:!0,control:Object(c.jsx)(qe.a,{checked:i}),label:u.selectCandidates})}),i&&Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(Fe,{})})]})}),Object(c.jsxs)(z.a,{children:[Object(c.jsx)(O.a,{color:"primary",onClick:b,children:u.cancel}),Object(c.jsx)(O.a,{color:"primary",type:"submit",children:u.create})]})]})]})},Me=n(399),He=n(400),Ge=n(401),Je=Object(d.a)({card:{width:275},editButton:{marginLeft:"auto"}}),ze=function(e){var t=e.data,n=Je(),a=Object(l.g)(),r=Object(o.b)();return Object(c.jsx)(Me.a,{className:n.card,variant:"outlined",onClick:function(){r(ke(t._id)),a.push("/election")},children:Object(c.jsx)(He.a,{children:Object(c.jsxs)(Ge.a,{children:[Object(c.jsx)(ae.a,{variant:"h5",children:t.title}),Object(c.jsx)(ae.a,{children:t.position})]})})})},Ke=n(402),Ze=n(168),Qe=n.n(Ze),Xe=Object(d.a)((function(){return{fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"}}})),$e=function(){var e=Xe(),t=Object(o.b)();return Object(c.jsx)("div",{className:"fab-wrapper",children:Object(c.jsx)(Ke.a,{color:"secondary","aria-label":"add",className:e.fab,onClick:function(){return t(q())},children:Object(c.jsx)(Qe.a,{})})})},et=function(e){var t=e.text;return Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(c.jsx)(ae.a,{variant:"h4",color:"secondary",style:{position:"absolute",margin:"0 auto",alignSelf:"center",justifySelf:"center"},children:t}),Object(c.jsx)("svg",{viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",width:"500px",height:"400px",style:{},children:Object(c.jsx)("path",{fill:"#8CB3FF",d:"M26.8,-48.5C38.8,-39.6,55.2,-40.5,66.5,-34C77.8,-27.6,84,-13.8,83.2,-0.5C82.3,12.8,74.5,25.6,66.5,37.9C58.5,50.1,50.5,61.8,39.4,67.7C28.3,73.6,14.1,73.8,1.5,71.2C-11.1,68.6,-22.3,63.3,-33.1,57.2C-43.8,51.1,-54.3,44.2,-58.2,34.5C-62.1,24.9,-59.5,12.4,-56.8,1.6C-54,-9.3,-51.2,-18.6,-48,-29.6C-44.9,-40.7,-41.6,-53.4,-33.5,-64.6C-25.5,-75.8,-12.7,-85.4,-2.6,-80.8C7.4,-76.2,14.9,-57.5,26.8,-48.5Z",transform:"translate(100 100)"})})]})},tt=function(){var e=Object(o.b)();Object(a.useEffect)(Object(g.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat(C,"/elections/")).then((function(e){return t(Ee(e.data))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(n){e(T({variant:"error",message:n}))}case 1:case"end":return t.stop()}}),t)}))),[]);var t=Object(o.c)((function(e){return e.election.elections})),n=Object(o.c)((function(e){return e.auth.isAdmin})),r=Object(o.c)((function(e){return e.locales.locale.dashboard}));return Object(c.jsxs)("div",{className:"dashboard-wrapper",children:[n&&Object(c.jsx)($e,{}),Object(c.jsx)(Ve,{}),Object(c.jsx)(Ye,{}),0===t.length&&Object(c.jsx)(et,{text:r.blob}),Object(c.jsx)(f.a,{container:!0,spacing:2,justify:"center",alignItems:"center",style:{margin:0},xs:12,children:t.map((function(e){return Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(ze,{data:{_id:e._id,title:e.title,position:e.position}})},ee.a.generate())}))})]})},nt=n(177),ct=function(e){var t=e.children,n=Object(nt.a)(e,["children"]),a=Object(o.c)((function(e){return e.auth.authToken}));return Object(c.jsx)(l.b,Object(Oe.a)(Object(Oe.a)({},n),{},{render:function(){return""!==a?t:Object(c.jsx)(l.a,{to:"/login"})}}))},at=n(169),rt=n.n(at),it=function(e){var t=e.open,n=e.setIsWarningOpen,a=Object(o.b)(),r=Object(o.c)((function(e){return e.election.currentElection._id})),i=Object(o.c)((function(e){return e.locales.locale.deleteElectionWarning})),s=Object(l.g)();return Object(c.jsxs)(F.a,{open:t,children:[Object(c.jsx)(R.a,{children:i.dialogTitle}),Object(c.jsx)(Y.a,{children:i.dialogContent}),Object(c.jsxs)(z.a,{children:[Object(c.jsx)(O.a,{onClick:function(){return n(!1)},color:"secondary",children:i.cancel}),Object(c.jsx)(O.a,{onClick:function(){try{a(function(e){return function(){var t=Object(g.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y()({method:"DELETE",url:"".concat(C,"/elections/").concat(e)}).then((function(){return n(ve(e))})).catch((function(e){n(T({variant:"error",message:e.response.data.error}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r)),n(!1),a(B()),s.push("/")}catch(e){a(T({variant:"error",message:e}))}},children:i.continue})]})]})},ot=function(){var e=Object(p.b)(),t=e.handleSubmit,n=e.control,r=Object(a.useState)(!1),i=Object(De.a)(r,2),s=i[0],l=i[1],u=Object(o.c)((function(e){return e.dialog.isOpen})),d=Object(o.c)((function(e){return e.locales.locale.electionSettings})),b=Object(o.c)((function(e){return e.election.currentElection})),h=Object(o.b)();return Object(c.jsxs)("div",{className:"election-settings-wrapper",children:[Object(c.jsx)(it,{open:s,setIsWarningOpen:l}),Object(c.jsx)(F.a,{open:u,fullWidth:!0,maxWidth:"xs",children:Object(c.jsxs)("form",{onSubmit:t((function(e){try{h(function(e){return function(){var t=Object(g.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y()({method:"PATCH",url:"".concat(C,"/elections/").concat(e._id),data:e}).then((function(){return n(ye(e))})).catch((function(e){n(T({variant:"error",message:e.response.data.error}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(Object(Oe.a)(Object(Oe.a)({},b),e))),h(B())}catch(t){h(T({variant:"error",message:t}))}})),children:[Object(c.jsx)(R.a,{children:d.dialogTitle}),Object(c.jsx)(Y.a,{children:Object(c.jsxs)(f.a,{container:!0,direction:"column",children:[Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(p.a,{name:"title",as:Object(c.jsx)(j.a,{margin:"dense",label:d.title,type:"text",fullWidth:!0,variant:"filled",name:"title"}),control:n,defaultValue:"",rules:{required:!0,min:6}})}),Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(p.a,{name:"position",as:Object(c.jsx)(j.a,{margin:"dense",label:d.position,type:"text",fullWidth:!0,variant:"filled",name:"position"}),rules:{required:!0,min:6},defaultValue:"",control:n})})]})}),Object(c.jsx)(z.a,{children:Object(c.jsxs)(f.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(ce.a,{onClick:function(){return l(!0)},children:Object(c.jsx)(rt.a,{})})}),Object(c.jsx)(f.a,{item:!0,children:Object(c.jsxs)("div",{children:[Object(c.jsx)(O.a,{color:"primary",onClick:function(){return h(B())},children:d.cancel}),Object(c.jsx)(O.a,{color:"primary",type:"submit",children:d.accept})]})})]})})]})})]})},st=n(170),lt=function(e){var t=e.map((function(e){return e.votes}));return{labels:e.map((function(e){return e.name})),datasets:[{label:"Number of votes",data:t,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]}},ut=function(){var e=Object(o.c)((function(e){return e.election.currentElection.candidates}));return Object(c.jsx)(st.a,{data:lt(e),height:400,width:75,options:{maintainAspectRatio:!1}})},dt=Object(d.a)((function(){return{electionWrapper:{height:"100vh"},banner:{margin:0},banner__title:{marginTop:25,marginBottom:10},banner__position:{marginBottom:25}}})),jt=function(){var e=Object(o.c)((function(e){return e.election.currentElection})),t=Object(o.c)((function(e){return e.auth})),n=Object(o.c)((function(e){return e.locales.locale.electionDashboard})),r=1===e.registeredVotes.filter((function(e){return e===t._id})).length,i=dt(),s=Object(o.b)(),u=Object(l.g)();Object(a.useEffect)((function(){0===Object.keys(e).length&&u.push("/")}));return Object(c.jsxs)("div",{className:i.electionWrapper,children:[Object(c.jsx)(Ve,{actionIcon:"back",path:{from:"/"}}),Object(c.jsx)(ot,{}),t.isAdmin&&Object(c.jsx)($e,{}),Object(c.jsxs)(b.a,{maxWidth:"md",className:i.banner,children:[Object(c.jsx)(ae.a,{variant:"h4",className:i.banner__title,children:e.title}),Object(c.jsx)(ae.a,{variant:"h5",className:i.banner__position,children:e.position}),Object(c.jsx)(O.a,{color:"secondary",variant:"contained",onClick:function(){t.isAdmin?s(r?T({message:n.raiseAlertMessage,variant:"warning"}):me(e._id)):u.push("/vote")},disabled:"finished"===e.status||r,children:"finished"===e.status?n.electionEnded:t.isAdmin?n.endElection:r?n.userVoted:n.voteNow}),t.isAdmin&&Object(c.jsx)(ce.a,{onClick:function(){return s(q())},children:Object(c.jsx)(le.a,{})})]}),Object(c.jsx)("div",{className:"winner-graph",children:"finished"===e.status?Object(c.jsx)(ut,{}):Object(c.jsx)(et,{text:n.blob})})]})},bt=n(415),ft=n(413),ht=function(){var e=Object(o.c)((function(e){return e.alert})),t=e.open,n=e.message,a=e.variant,r=Object(o.b)(),i=function(){r(S())};return Object(c.jsx)(bt.a,{autoHideDuration:6e3,open:t,onClose:i,children:Object(c.jsx)(ft.a,{elevation:6,variant:"filled",severity:a,onClose:i,children:n})})},Ot=n(421),pt=n(389),mt=n(344),xt=n(407),gt=n(408),vt=n(174),yt=n.n(vt),Ct=n(175),Et=n.n(Ct),wt=n(416),kt=n(403),Tt=n(404),St=n(405),_t=n(173),At=n.n(_t),It=Object(E.c)({name:"unverified",initialState:{unverifiedUsers:[]},reducers:{fetchUnverifiedUsers:function(e,t){e.unverifiedUsers=t.payload},verifyUser:function(e,t){e.unverifiedUsers=e.unverifiedUsers.filter((function(e){return e._id!==t.payload}))},denyUser:function(e,t){e.unverifiedUsers=e.unverifiedUsers.filter((function(e){return e._id!==t.payload}))}}}),Nt=It.actions,Wt=Nt.denyUser,Pt=Nt.fetchUnverifiedUsers,Ut=Nt.verifyUser,Vt=It.reducer,Dt=Object(d.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},summary:{backgroundColor:"#d5d5d5"},summaryText:{margin:e.spacing(1)},details:{flexDirection:"column"}}})),qt=function(e){var t=e.data,n=Dt(),a=Object(o.b)();return Object(c.jsxs)(wt.a,{className:n.root,children:[Object(c.jsx)(kt.a,{expandIcon:Object(c.jsx)(At.a,{}),className:n.summary,children:Object(c.jsx)(ae.a,{variant:"h5",children:t.name})}),Object(c.jsxs)(Tt.a,{className:n.details,children:[Object(c.jsxs)(ae.a,{gutterBottom:!0,children:["Code:",t.code]}),Object(c.jsx)("br",{}),Object(c.jsxs)(ae.a,{gutterBottom:!0,children:["Email:",t.email]}),Object(c.jsx)("br",{}),Object(c.jsxs)(ae.a,{children:["Gender:",t.gender]})]}),Object(c.jsxs)(St.a,{children:[Object(c.jsx)(O.a,{color:"secondary",variant:"outlined",onClick:function(){var e;a((e=t._id,function(){var t=Object(g.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y()({method:"DELETE",url:"".concat(C,"/users/deny/").concat(e)}).then((function(t){var c=t.data;n(Wt(e)),T({message:c.message,variant:"success"})})).catch((function(e){n(T({message:e.response.data.error,variant:"error"}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:"Deny"}),Object(c.jsx)(O.a,{type:"submit",color:"primary",variant:"contained",onClick:function(){var e;a((e=t._id,function(){var t=Object(g.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y()({method:"PATCH",url:"".concat(C,"/users/verify/").concat(e)}).then((function(t){var c=t.data;n(Ut(e)),T({message:c.message,variant:"success"})})).catch((function(e){n(T({message:e.response.data.error,variant:"error"}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:"Accept"})]})]})},Bt=function(e){var t=e.isOpen,n=e.onClose,r=Object(o.c)((function(e){return e.unverified.unverifiedUsers})),i=Object(o.b)();return Object(a.useEffect)((function(){i(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()({method:"GET",url:"".concat(C,"/users/unverified")}).then((function(e){var n=e.data;t(Pt(n))})).catch((function(e){return t(T({message:e.response.data.error,variant:"error"}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(c.jsx)(F.a,{open:t,onClose:n,fullWidth:!0,children:Object(c.jsx)(Y.a,{children:r.map((function(e){return Object(c.jsx)(qt,{data:e},Object($.generate)())}))})})},Lt=n(388),Ft=n(411),Rt=n(406),Yt={language:"en",locale:{login:{password:"Password",logIn:"Log In",requestAccess:"Request access"},registerDialog:{dialogTitle:"Fill request",yourName:"Your Name",code:"Code",password:"Password",gender:"Gender",male:"Male",female:"Female",cancel:"Cancel",send:"Send"},dashboard:{blob:"There are no elections yet"},createElectionDialog:{createElection:"Create election",title:"Title",position:"Position",selectCandidates:"Select Candidates Beforehand",cancel:"Cancel",create:"Create"},userSelector:{placeholder:"Select the candidates"},adminPanel:{verifyUsers:"Verify Users"},candidateCard:{cardTitle:"Candidate"},deleteElectionWarning:{dialogTitle:"Are you sure you want to delete this?",dialogContent:"This can't be undone",cancel:"Cancel",continue:"Continue"},electionDashboard:{blob:"You can vote now!",raiseAlertMessage:"You already voted!",electionEnded:"The election has ended",userVoted:"You already voted",voteNow:"Vote now!",endElection:"End Election"},electionSettings:{dialogTitle:"Election settings",title:"Title",position:"Position",cancel:"Cancel",accept:"Accept"}}},Mt=Object(E.c)({name:"locales",initialState:Yt,reducers:{setLocale:function(e,t){e.language=t.payload,"en"===e.language?e.locale={login:{password:"Password",logIn:"Log In",requestAccess:"Request access"},registerDialog:{dialogTitle:"Fill request",yourName:"Your Name",code:"Code",password:"Password",gender:"Gender",male:"Male",female:"Female",cancel:"Cancel",send:"Send"},dashboard:{blob:"There are no elections yet"},createElectionDialog:{createElection:"Create election",title:"Title",position:"Position",selectCandidates:"Select Candidates Beforehand",cancel:"Cancel",create:"Create"},userSelector:{placeholder:"Select the candidates"},adminPanel:{verifyUsers:"Verify Users"},candidateCard:{cardTitle:"Candidate"},deleteElectionWarning:{dialogTitle:"Are you sure you want to delete this?",dialogContent:"This can't be undone",cancel:"Cancel",continue:"Continue"},electionDashboard:{blob:"You can vote now!",raiseAlertMessage:"You already voted!",electionEnded:"The election has ended",userVoted:"You already voted",voteNow:"Vote now!",endElection:"End Election"},electionSettings:{dialogTitle:"Election settings",title:"Title",position:"Position",cancel:"Cancel",accept:"Accept"}}:e.locale={login:{password:"Contrase\xf1a",logIn:"Ingresar",requestAccess:"Solicitar acceso"},registerDialog:{dialogTitle:"Llena la solicitud",yourName:"Tu nombre",code:"C\xf3digo",password:"Contrase\xf1a",gender:"G\xe9nero",male:"Hombre",female:"Mujer",cancel:"Cancelar",send:"Enviar"},dashboard:{blob:"No hay elecciones."},createElectionDialog:{createElection:"Crear elecci\xf3n",title:"Titulo",position:"Posici\xf3n",selectCandidates:"Seleccionar candidatos de antemano",cancel:"Cancelar",create:"Crear"},userSelector:{placeholder:"Selecciona los candidatos"},adminPanel:{verifyUsers:"Verificar usuarios"},candidateCard:{cardTitle:"Candidato"},deleteElectionWarning:{dialogTitle:"Est\xe1 seguro que quiere eliminar esta elecci\xf3n?",dialogContent:"Esto no puede deshacerse",cancel:"Cancelar",continue:"Continuar"},electionDashboard:{blob:"Puede votar ahora!",raiseAlertMessage:"Ya has votado!",electionEnded:"La elecci\xf3n ha terminado",userVoted:"Ya has votado!",voteNow:"Vota ahora!",endElection:"Terminar elecci\xf3n"},electionSettings:{dialogTitle:"Ajustes de elecci\xf3n",title:"T\xedtulo",position:"Posici\xf3n",cancel:"Cancelar",accept:"Aceptar"}}}}}),Ht=Mt.actions.setLocale,Gt=Mt.reducer,Jt=function(){var e=Object(o.b)();return Object(c.jsxs)(h.a,{style:{padding:10},children:[Object(c.jsx)(Lt.a,{children:"Language"}),Object(c.jsxs)(Ft.a,{onChange:function(t){e(Ht(t.target.value))},defaultValue:"en",children:[Object(c.jsx)(Rt.a,{value:"en",children:"English"}),Object(c.jsx)(Rt.a,{value:"es",children:"Espa\xf1ol"})]})]})},zt=function(){var e=Object(a.useState)(!1),t=Object(De.a)(e,2),n=t[0],r=t[1],i=Object(o.b)(),s=Object(o.c)((function(e){return e.panel.open})),l=Object(o.c)((function(e){return e.locales.locale.adminPanel})),u=Object(o.c)((function(e){return e.unverified.unverifiedUsers.length}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Ot.a,{open:s,anchor:"right",onClose:function(){return i(Ie())},children:Object(c.jsxs)(pt.a,{children:[Object(c.jsxs)(mt.a,{button:!0,onClick:function(){0===u?i(T({message:"There are no users left to check",variant:"warning"})):r(!0)},children:[Object(c.jsx)(xt.a,{children:Object(c.jsx)(yt.a,{})}),Object(c.jsx)(gt.a,{primary:l.verifyUsers})]}),Object(c.jsxs)(mt.a,{children:[Object(c.jsx)(xt.a,{children:Object(c.jsx)(Et.a,{})}),Object(c.jsx)(Jt,{})]})]})}),Object(c.jsx)(Bt,{isOpen:n,onClose:function(){return r(!1)}})]})},Kt=n(409),Zt=n(422),Qt=n(410),Xt=function(e){var t=e.data,n=e.onClick,a=Object(o.c)((function(e){return e.locales.locale.candidateCard}));return Object(c.jsxs)(Me.a,{style:{maxWidth:500,width:250},children:[Object(c.jsx)(Kt.a,{avatar:Object(c.jsx)(Zt.a,{children:t.name[0]}),title:a.candidateCard}),Object(c.jsxs)(Ge.a,{children:[Object(c.jsx)(ae.a,{children:t.name}),Object(c.jsx)(ae.a,{children:t.code})]}),Object(c.jsx)(Qt.a,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(c.jsx)(ce.a,{onClick:function(){return n(t._id)},children:Object(c.jsx)(oe.a,{})})})]})},$t=Object(d.a)((function(){return{votingPanel:{height:"100vh",display:"flex",justifyContent:"space-evenly",alignItems:"center"}}})),en=function(){var e=Object(o.c)((function(e){return e.election.currentElection.candidates}))||[],t=Object(o.c)((function(e){return e.election.currentElection._id})),n=Object(o.c)((function(e){return e.auth._id})),r=$t(),i=Object(l.g)(),s=Object(o.b)(),u=function(e){s(pe({electionId:t,userId:n,candidateId:e})),i.push("/election")};return Object(a.useEffect)((function(){0===e.length&&i.push("/")})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ce.a,{onClick:function(){i.push("/election")},children:Object(c.jsx)(be.a,{})}),Object(c.jsx)("div",{className:r.votingPanel,children:e.map((function(e){return Object(c.jsx)(Xt,{data:e,onClick:u},Object($.generate)())}))})]})},tn=Object(d.a)({app:{height:"100vh"}});var nn=function(){var e=tn(),t=Object(o.c)((function(e){return e.auth.isAdmin}));return Object(c.jsxs)("div",{className:e.app,children:[t&&Object(c.jsx)(zt,{}),Object(c.jsx)(ht,{}),Object(c.jsx)(u.a,{children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:"/login",children:Object(c.jsx)(X,{})}),Object(c.jsx)(ct,{path:"/vote",children:Object(c.jsx)(en,{})}),Object(c.jsx)(ct,{path:"/election",children:Object(c.jsx)(jt,{})}),Object(c.jsx)(ct,{path:"/",children:Object(c.jsx)(tt,{})})]})})]})},cn=n(42),an=Object(E.c)({name:"users",initialState:{users:[]},reducers:{setUser:function(e,t){e.users=t.payload}},extraReducers:Object(fe.a)({},Re.fulfilled,(function(e,t){e.users=t.payload}))}),rn=(an.actions.setUser,an.reducer),on=Object(cn.c)({auth:U,dialog:L,election:Se,alert:_,panel:We,unverified:Vt,users:rn,locales:Gt}),sn=Object(E.a)({reducer:on});Object(s.config)(),i.a.render(Object(c.jsx)(o.a,{store:sn,children:Object(c.jsx)(nn,{})}),document.getElementById("root"))}},[[337,1,2]]]);
//# sourceMappingURL=main.9bd10ebf.chunk.js.map